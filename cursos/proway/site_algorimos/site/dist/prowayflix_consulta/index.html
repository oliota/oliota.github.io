<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
        crossorigin="anonymous"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="js/app.js" type="text/javascript"></script>
    <meta charset="utf-8">
    <title>ProwayFlix</title>
    <link rel="stylesheet" href="css/app.css">
</head>

<body>

    </div>
    <div class="container">
        <h1>Sistema ProwayFlix</h1>
        <div class="row">
            <div class="col-sm-3 pull-left">
                <div id="categoria" class="supply box box-green" title="">categorias</div>
                <br><br> 
            </div>
            <div class="col-sm-3 pull-left">
                <br><br>
                <br><br>
                <div id="serie" class="supply box box-red categoria" title="">series</div>
                <br><br>
                <br><br>
                <div id="filme" class="supply box box-blue categoria" title="">filmes</div>
                <br><br>
            </div>
            <div class="col-sm-3 pull-left"> 
                <br><br>
                <br><br>
                <br><br>
                <br><br>
                <div id='temporada' class="supply box box-red serie">temporadas</div>
                <br><br>

            </div>
            <div class="col-sm-3 pull-left"> 
                <br><br>
                <br><br>
                <br><br>
                <br><br>
                <br><br>
                <br><br>
                <div id="episodio" class="supply box box-red temporada">episodios</div>



            </div>

        </div>
        <div class="row">
            <ul>
                <li><strong>Clique em cada tabela para copiar o script</strong> , ou crie as tabelas manualmente no Sqlite Studio</li>
                <li><a href="#" id="inserts"> Clique aqui para copiar</a> os scripts de inserção de registros de todas as tabelas</li>
                <li><a href="#" id="selects"> Clique aqui para copiar</a> os selects</li>
            </ul>
            </div>
        <div class="row">
            <h3>
                <ol>
                   <li>Ordenar
                       <ul>
                           <li>order by asc  ou order by (asc já é o padrão) </li>
                           <li>order by desc </li>
                       </ul>
                   </li>
                   <li>Agrupar
                       <ul>
                           <li>Contar  count(coluna)</li>
                           <li>Somar  sum(coluna)</li>
                           <li>Media  avg(coluna)</li> 
                       </ul>
                   </li>
                </ol>

            </h3>

        </div>
    </div>

    <script>
        $('.supply').linha({ strokeColor: 'blue', });


        $("#categoria").attr("title",
            '---------------------' + '\n' +
            'Campos' + '\n' +
            '---------------------' + '\n' +
            'id_categoria' + '\n' +
            'nome: text' + '\n' +
            '---------------------' + '\n' +
            'Chaves' + '\n' +
            '---------------------' + '\n' +
            'id_categoria PRIMARIA UNICA'
        ).click(
            function () {


                copiar('CREATE TABLE categorias (' + '\n' +
                    'id_categoria INTEGER   ' + '\n' +
                    '                           PRIMARY KEY' + '\n' +
                    '                           NOT NULL' + '\n' +
                    '                           UNIQUE,' + '\n' +
                    'nome         VARCHAR (100) UNIQUE' + '\n' +
                    '                          NOT NULL' + '\n' +
                    ');');


            }
        );


        $("#filme").attr("title",
            '---------------------' + '\n' +
            'Campos' + '\n' +
            '---------------------' + '\n' +
            'id_filme' + '\n' +
            'categoria' + '\n' +
            'nome: text' + '\n' +
            'ano: inteiro' + '\n' +
            'sinopse: text' + '\n' +
            '---------------------' + '\n' +
            'Chaves' + '\n' +
            '---------------------' + '\n' +
            'id_filme PRIMARIA UNICA' + '\n' +
            'categoria ESTRANGEIRA referente a tabela Categoria campo id_categoria'
        ).click(
            function () {


                copiar('CREATE TABLE filmes (' + '\n' +
                    'id_filme  INTEGER       PRIMARY KEY' + '\n' +
                    '                            UNIQUE' + '\n' +
                    '                            NOT NULL,' + '\n' +
                    '    nome      VARCHAR (200) NOT NULL,' + '\n' +
                    '    ano       INTEGER       NOT NULL,' + '\n' +
                    '    sinopse   TEXT,' + '\n' +
                    '    categoria INTEGER       NOT NULL,' + '\n' +
                    '    FOREIGN KEY (' + '\n' +
                    '        categoria' + '\n' +
                    '    )' + '\n' +
                    '    REFERENCES categorias (id_categoria) ' + '\n' +
                    ');'
                );


            }
        );


        $("#serie").attr("title",
            '---------------------' + '\n' +
            'Campos' + '\n' +
            '---------------------' + '\n' +
            'id_serie' + '\n' +
            'categoria' + '\n' +
            'nome: text' + '\n' +
            'ano: inteiro' + '\n' +
            'sinopse: text' + '\n' +
            '---------------------' + '\n' +
            'Chaves' + '\n' +
            '---------------------' + '\n' +
            'id_serie PRIMARIA UNICA' + '\n' +
            'categoria ESTRANGEIRA referente a tabela Categoria campo id_categoria'
        ).click(
            function () {


                copiar('CREATE TABLE series (' + '\n' +
                    'id_serie  INTEGER       PRIMARY KEY' + '\n' +
                    '                            UNIQUE' + '\n' +
                    '                            NOT NULL,' + '\n' +
                    '    nome      VARCHAR (200) NOT NULL,' + '\n' +
                    '    ano       INTEGER       NOT NULL,' + '\n' +
                    '    sinopse   TEXT,' + '\n' +
                    '    categoria INTEGER       NOT NULL,' + '\n' +
                    '    FOREIGN KEY (' + '\n' +
                    '        categoria' + '\n' +
                    '    )' + '\n' +
                    '    REFERENCES categorias (id_categoria) ' + '\n' +
                    ');'
                );


            }
        );



        $("#temporada").attr("title",
            '---------------------' + '\n' +
            'Campos' + '\n' +
            '---------------------' + '\n' +
            'id_temporada' + '\n' +
            'serie' + '\n' +
            'sequencial: inteiro' + '\n' +
            'nome: text' + '\n' +
            '---------------------' + '\n' +
            'Chaves' + '\n' +
            '---------------------' + '\n' +
            'id_temporada PRIMARIA UNICA' + '\n' +
            'serie ESTRANGEIRA referente a tabela Serie campo id_serie'
        ).click(
            function () {


                copiar('CREATE TABLE temporadas (' + '\n' +
                    'id_temporada  INTEGER       PRIMARY KEY' + '\n' +
                    '                            UNIQUE' + '\n' +
                    '                            NOT NULL,' + '\n' +
                    '    nome      VARCHAR (200) NOT NULL,' + '\n' +
                    '    sequencial       INTEGER       NOT NULL,' + '\n' + 
                    '    serie INTEGER       NOT NULL,' + '\n' +
                    '    FOREIGN KEY (' + '\n' +
                    '        serie' + '\n' +
                    '    )' + '\n' +
                    '    REFERENCES series (id_serie) ' + '\n' +
                    ');'
                );


            }
        );

        $("#episodio").attr("title",
            '---------------------' + '\n' +
            'Campos' + '\n' +
            '---------------------' + '\n' +
            'id_episodio' + '\n' +
            'temporada' + '\n' +
            'sequencial: inteiro' + '\n' +
            'nome: text' + '\n' +
            '---------------------' + '\n' +
            'Chaves' + '\n' +
            '---------------------' + '\n' +
            'id_episodio PRIMARIA UNICA' + '\n' +
            'temporada ESTRANGEIRA referente a tabela Temporada campo id_temporada'
        ).click(
            function () {


                copiar('CREATE TABLE episodios (' + '\n' +
                    'id_episodio  INTEGER       PRIMARY KEY' + '\n' +
                    '                            UNIQUE' + '\n' +
                    '                            NOT NULL,' + '\n' +
                    '    nome      VARCHAR (200) NOT NULL,' + '\n' +
                    '    sequencial       INTEGER       NOT NULL,' + '\n' + 
                    '    temporada INTEGER       NOT NULL,' + '\n' +
                    '    FOREIGN KEY (' + '\n' +
                    '        temporada' + '\n' +
                    '    )' + '\n' +
                    '    REFERENCES temporadas (id_temporada) ' + '\n' +
                    ');'
                );


            }
        );



        $("#inserts").click(
            function () {

                let inserts=new Array;

                inserts.push('-- após executar pode apagar os comandos');

                inserts.push('-- so utilizar esses comandos para limpar os registros de todas as tabelas, por padrão esta comentado');
                inserts.push('/*');
                inserts.push('delete from episodios;');
                inserts.push('delete from temporadas;');
                inserts.push('delete from series;');
                inserts.push('delete from filmes;');
                inserts.push('delete from categorias;');
                inserts.push('*/');
 
                inserts.push('\n\n');
                inserts.push('-- criando categorias');
                inserts.push('insert into categorias (nome) values ("Ação");');
                inserts.push('insert into categorias (nome) values ("Terror");');
                inserts.push('insert into categorias (nome) values ("Romance");');
                inserts.push('insert into categorias (nome) values ("Ficção");');
                inserts.push('insert into categorias (nome) values ("Anime");');
                inserts.push('insert into categorias (nome) values ("Fantasia");');
                inserts.push('insert into categorias (nome) values ("Comédia");');
                inserts.push('insert into categorias (nome) values ("Drama");'); 
                
                inserts.push('\n\n');
                inserts.push('-- criando filmes');
                inserts.push('insert into filmes (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Ação"),"Matrix",1999,"Neo é o protagonista e ele vence");');
                inserts.push('insert into filmes (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Anime"),"Avatar o ultimo mestre do ar",2010,"É o filme do dominador elemental com a seta na cabeça");');
                inserts.push('insert into filmes (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Ficção"),"Avatar",2008,"É a historia da pocahontas so que em outro planeta");');
                inserts.push('insert into filmes (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Ação"),"Matrix 2",2000,"Neo não teve tempo de vencer no primeiro filme será que agora ele vence?");');
               
                
                inserts.push('\n\n');
                inserts.push('-- criando series');
                inserts.push('insert into series (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Ação"),"One punch man",2016,"Um heroi fica tão forte que vence com apenas um soco");');
                inserts.push('insert into series (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Anime"),"Doctor Stone",2021,"A humanidade é pedrificada e 3mil anos depois a humanidade tenta reconstruir uma sociedade tecnologia");');
                inserts.push('insert into series (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Ficção"),"Black mirror",2017,"Varias historias isoladas onde a tecnologia gerou impacto negativo a humanidade");');
                inserts.push('insert into series (categoria,nome,ano,sinopse) \n values ( (select id_categoria from categorias where nome="Ação"),"Street fight",1990,"Ken é um riquinho que gosta de bater em pobres e Ryu é um pobre que tem o mesmo gosto do Ken");');
               
                
                inserts.push('\n\n');
                inserts.push('-- criando temporadas');
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Black mirror"),4,"Temporada 4");');
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="One punch man"),1,"Temporada 1");');  
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Street fight"),2,"Temporada 2");');

                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Black mirror"),2,"Temporada 2");');
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Doctor Stone"),1,"Temporada 1");');
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="One punch man"),2,"Temporada 2");');

                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Street fight"),1,"Temporada 1");');
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Black mirror"),1,"Temporada 1");'); 
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Doctor Stone"),2,"Temporada 2");'); 

                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Street fight"),3,"Temporada 3");'); 
                inserts.push('insert into temporadas (serie,sequencial,nome) \n values ( (select id_serie from series where nome="Black mirror"),3,"Temporada 3");'); 
               
                
                inserts.push('\n\n');
                inserts.push('-- criando episodios');
                
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  2,"Garou", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="One punch man" and t.sequencial=2 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  1,"Resumo", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="One punch man" and t.sequencial=2 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  3,"A liga dos monstros", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="One punch man" and t.sequencial=2 ) );'); 
               

                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  1,"O homem mais forte", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="One punch man" and t.sequencial=1 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  3,"O ciborgue solitario", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="One punch man" and t.sequencial=1 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  2,"A casa de evolução", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="One punch man" and t.sequencial=1 ) );'); 
               

                
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  3,"Perigo", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Doctor Stone" and t.sequencial=1 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  1,"O mundo de pedra", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Doctor Stone" and t.sequencial=1 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  2,"Acordando", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Doctor Stone" and t.sequencial=1 ) );'); 
               
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  3,"Traição", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Doctor Stone" and t.sequencial=2 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  1,"Guerra", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Doctor Stone" and t.sequencial=2 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  2,"Acordo", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Doctor Stone" and t.sequencial=2 ) );'); 
               
                

                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  2,"Privacidade", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Black mirror" and t.sequencial=4 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  1,"Politica", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Black mirror" and t.sequencial=4 ) );');  
               

                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  2,"Colmeia", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Black mirror" and t.sequencial=1 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  1,"Bromance", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Black mirror" and t.sequencial=1 ) );');  
               

                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  2,"Museu", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Black mirror" and t.sequencial=2 ) );'); 
                inserts.push('insert into episodios (sequencial,nome,temporada) \n values (  1,"Justiça", \n (select id_temporada from temporadas t \n\t inner join series s on s.id_serie=t.serie \n\t where s.nome="Black mirror" and t.sequencial=2 ) );');  
               
 
                

                let script='';

                inserts.forEach(element => {
                    script+=element+'\n';
                    
                });


                copiar(script );


            }
        );


        $("#selects").click(
            function () {

                let inserts=new Array;
 
 
                




 
                inserts.push('\n\n');
                inserts.push('-- selecionar os filmes e mostrar o nome das categorias');
                inserts.push('select \n\t f.nome filme, \n\t c.nome categoria \n from filmes f inner join categorias c on c.id_categoria = f.categoria;');
                
                inserts.push('\n\n');
                inserts.push('select \n\t s.nome serie, c.nome categoria, \n\t t.nome temporada, \n\t e.sequencial episodio,\n\t e.nome titulo \n from series s \n inner join categorias c on c.id_categoria = s.categoria \n left join temporadas t on t.serie=s.id_serie \n left join episodios e on e.temporada = t.id_temporada \n order by s.nome,t.sequencial,e.sequencial;');
               

                let script='';

                inserts.forEach(element => {
                    script+=element+'\n';
                    
                });


                copiar(script );


            }
        );



        function copiar(conteudo) {
            var dummy = $('<textarea>').attr('id','copia').val(conteudo).appendTo('body').select();
            document.execCommand('copy');
            alert('O script já está copiado, agora é so colar no Sqlite Studio');
            var item = document.getElementById("copia");
            document.body.removeChild(item);

        }

    </script>
</body>


</html>